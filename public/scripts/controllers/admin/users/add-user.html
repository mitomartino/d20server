<div class="modal-header flex-horizontal">
    <div class="modal-title full-flex">
        Add a User
    </div>
</div>

<div class="modal-body add-user flex-vertical">

    <div class="unflex flex-horizontal tabs">
        <div class="full-flex" ng-repeat="tab in tabs" ng-class="{'active': view.name == tab.name}">
            <span class="clickable" ng-click="view.name = tab.name">{{ tab.title }}</span>
        </div>
    </div>

    <div class="tab-view animate-slide-right" ng-show="view.name=='general'">
        <div class="unflex flex-horizontal form-line" >
            <div class="unflex">
                <label for="email">E-mail:</label>
            </div>
            <div class="full-flex">
                <input type="text" auto-focus name="email" ng-model="user.email" title="email address" placeholder="Enter an email address">
                <div class="unflex flex-horizontal form-line" >
                    <span class="validation-error" ng-if="errors.email">{{ errors.email }}</span>
                </div>
            </div>
        </div>

        <div class="unflex flex-horizontal form-line" >
            <div class="unflex">
                <label for="nickname">Nickname:</label>
            </div>
            <div class="full-flex">
                <input type="text" name="nickname" ng-model="user.nickname" title="nickname" placeholder="Enter the name to display">
                <div class="unflex flex-horizontal form-line" >
                    <span class="validation-error" ng-if="errors.nickname">{{ errors.nickname }}</span>
                </div>
            </div>
        </div>

        <div class="unflex flex-horizontal form-line" >
            <div class="unflex">
                <label for="password">Password:</label>
            </div>
            <div class="full-flex">
                <input type="password" name="password" ng-model="user.password" title="password">
                <div class="unflex flex-horizontal form-line" >
                    <span class="validation-error" ng-if="errors.password">{{ errors.password }}</span>
                </div>
            </div>
        </div>

        <div class="unflex flex-horizontal form-line" >
            <div class="unflex">
                <label for="pronouns">Pronouns:</label>
            </div>
            <div class="full-flex">
                <select ng-model="user.pronouns" ng-options="value.value as value.label for value in pronouns" name="pronouns">
                </select>
                <div class="unflex flex-horizontal form-line" >
                    <span class="validation-error" ng-if="errors.pronouns">{{ errors.pronouns }}</span>
                </div>
            </div>
        </div>

        <div class="unflex flex-horizontal form-line nudge-down-more" >
            <div class="unflex">
                <label for="about">About Me:</label>
            </div>
            <div class="full-flex">
            </div>
        </div>

        <div class="unflex flex-horizontal form-line" >
            <div class="full-flex">
                <textarea ng-model="user.about" rows="5"></textarea>
            </div>
        </div>
    </div>

    <div class="tab-view animate-slide-right" ng-show="view.name=='avatar'">

        <div class="unflex flex-horizontal form-line" >
            <div class="unflex">
                <label for="avatar">Avatar:</label>
            </div>
            <div class="full-flex">
            </div>
        </div>

        <div class="unflex flex-horizontal form-line" >
            <image-chooser class="full-flex avatar" collection="system" drawer="avatars" image="user.avatar"></image-chooser>
        </div>
    </div>

</div>

<div class="unflex flex-horizontal form-line" >
    <span class="validation-error" ng-if="errors.server">{{ errors.server }}</span>
</div>

<div class="unflex flex-horizontal action-row">
    <md-button class="md-raised md-primary clickable full-flex" ng-if="!busy" ng-click="addUser()">Add User</md-button>
    <md-button class="md-raised md-warn clickable full-flex" ng-if="!busy" ng-click="cancel()">Cancel</button>
    <div class="loading-block" ng-if="busy">
        <i class="fa fa-3x fa-spinner fa-spin"></i>
    </div>
</div>